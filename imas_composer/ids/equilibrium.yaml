# Equilibrium IDS Configuration for DIII-D
#
# Based on OMAS mappings in machine_mappings/_efit.json

# Static values (hardcoded, not from MDSplus)
static_values:
  ids_properties.homogeneous_time: 1

# EFIT tree configuration
# Note: EFIT01, EFIT02, etc. are different equilibrium reconstructions
# Default to EFIT01 for now
default_efit_tree: EFIT01

# Supported fields
# Note: Uses clean IMAS notation without .: array markers
fields:
  # Code metadata
  - code.name
  - code.version

  # IDS properties
  - ids_properties.homogeneous_time

  # Time arrays
  - time
  - time_slice.time

  # Boundary (plasma boundary)
  - time_slice.boundary.outline.r
  - time_slice.boundary.outline.z
  - time_slice.boundary.x_point.r
  - time_slice.boundary.x_point.z

  # Boundary separatrix (same as boundary for EFIT)
  - time_slice.boundary_separatrix.outline.r
  - time_slice.boundary_separatrix.outline.z
  - time_slice.boundary_separatrix.x_point.r
  - time_slice.boundary_separatrix.x_point.z
  - time_slice.boundary_separatrix.geometric_axis.r
  - time_slice.boundary_separatrix.geometric_axis.z
  - time_slice.boundary_separatrix.closest_wall_point.distance
  - time_slice.boundary_separatrix.gap.name
  - time_slice.boundary_separatrix.gap.value
  - time_slice.boundary_separatrix.strike_point.r
  - time_slice.boundary_separatrix.strike_point.z
  - time_slice.boundary_separatrix.triangularity_upper
  - time_slice.boundary_separatrix.triangularity_lower
  - time_slice.boundary_separatrix.elongation
  - time_slice.boundary_separatrix.minor_radius
  - time_slice.boundary_separatrix.psi

  # Constraints
  - time_slice.constraints.ip.measured
  - time_slice.constraints.ip.sigma
  - time_slice.constraints.ip.filtered_weight_value
  - time_slice.constraints.ip.calculated
  - time_slice.constraints.ip.residual
  - time_slice.constraints.bpol_probe.measured
  - time_slice.constraints.bpol_probe.sigma
  - time_slice.constraints.bpol_probe.filtered_weight_value
  - time_slice.constraints.bpol_probe.calculated
  - time_slice.constraints.bpol_probe.residual
  - time_slice.constraints.diamagnetic_flux.measured
  - time_slice.constraints.diamagnetic_flux.sigma
  - time_slice.constraints.diamagnetic_flux.filtered_weight_value
  - time_slice.constraints.diamagnetic_flux.calculated
  - time_slice.constraints.diamagnetic_flux.residual
  - time_slice.constraints.flux_loop.measured
  - time_slice.constraints.flux_loop.sigma
  - time_slice.constraints.flux_loop.filtered_weight_value
  - time_slice.constraints.flux_loop.calculated
  - time_slice.constraints.flux_loop.residual
  - time_slice.constraints.mse_polarisation_angle.measured
  - time_slice.constraints.mse_polarisation_angle.measured_error_upper
  - time_slice.constraints.mse_polarisation_angle.weight
  - time_slice.constraints.mse_polarisation_angle.reconstructed
  - time_slice.constraints.mse_polarisation_angle.chi_squared
  - time_slice.constraints.pf_current.measured
  - time_slice.constraints.pf_current.measured_error_upper
  - time_slice.constraints.pf_current.weight
  - time_slice.constraints.pf_current.reconstructed
  - time_slice.constraints.pf_current.chi_squared

# Notes:
# - time_slice.: notation means array of time slices
# - Each time slice corresponds to one EFIT time point
# - boundary.outline is ragged (different number of points per time)
# - x_point.: has fixed size of 2 (primary and secondary X-point)
# - For EFIT, boundary and boundary_separatrix are identical (both use RBBBS/ZBBBS)
# - gap.: has 4 entries (inboard, outboard, top, bottom)
# - strike_point.: has up to 4 entries (vsid, vsod, vsiu, vsou), ragged array
